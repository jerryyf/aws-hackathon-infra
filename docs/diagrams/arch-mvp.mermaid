graph TB
    subgraph "AWS Region: us-east-1"
        subgraph "VPC: 10.0.0.0/16"
            
            subgraph "Private AgentCore Subnets"
                subgraph "AZ-1: us-east-1a
10.0.21.0/24"
                    AgentRuntime1[AgentCore Runtime 1
CfnRuntime
512 CPU / 1024 MiB]
                end
                
                subgraph "AZ-2: us-east-1b
10.0.22.0/24"
                    AgentRuntime2[AgentCore Runtime 2
CfnRuntime
512 CPU / 1024 MiB]
                end
            end
            
            subgraph "Security Groups"
                RuntimeSG[Agent Runtime SG
Outbound: 443 to VPC Endpoints]
            end
            
            subgraph "VPC Endpoints"
                VPCE_BedrockAgentCore[Bedrock AgentCore
Interface Endpoint
Multi-AZ
Private DNS Enabled]
                VPCE_Bedrock[Bedrock
Interface Endpoint]
                VPCE_ECR_API[ECR API
Interface Endpoint]
                VPCE_ECR_DKR[ECR Docker
Interface Endpoint]
                VPCE_CW_Logs[CloudWatch Logs
Interface Endpoint]
                VPCE_Secrets[Secrets Manager
Interface Endpoint]
            end
        end
    end
    
    subgraph "AWS Managed Services - Regional"
        BedrockAgentCore[Bedrock AgentCore Service
Runtime Management]
        Bedrock[Bedrock Service
Foundation Models]
        
        subgraph "Container Registry"
            ECR[ECR Repository
Agent Container Image
KMS Encrypted]
        end
        
        subgraph "Security & Configuration"
            IAM[IAM Execution Role
Trust: bedrock-agentcore.amazonaws.com
Permissions: Bedrock, ECR, CloudWatch]
            Secrets[Secrets Manager
API Keys
Configuration]
        end
        
        subgraph "Observability"
            CloudWatch[CloudWatch
Logs + Metrics
Runtime Status
Invocation Count
Error Rate
Latency p50/p99]
            CloudTrail[CloudTrail
AgentCore API Audit]
        end
    end
    
    %% Runtime to Security Group
    AgentRuntime1 -.->|Member of| RuntimeSG
    AgentRuntime2 -.->|Member of| RuntimeSG
    
    %% Runtime to VPC Endpoints
    AgentRuntime1 -->|Port 443| VPCE_BedrockAgentCore
    AgentRuntime2 -->|Port 443| VPCE_BedrockAgentCore
    
    AgentRuntime1 -->|Invoke Model| VPCE_Bedrock
    AgentRuntime2 -->|Invoke Model| VPCE_Bedrock
    
    AgentRuntime1 -.->|Pull Image| VPCE_ECR_DKR
    AgentRuntime2 -.->|Pull Image| VPCE_ECR_DKR
    
    AgentRuntime1 -->|Logs| VPCE_CW_Logs
    AgentRuntime2 -->|Logs| VPCE_CW_Logs
    
    AgentRuntime1 -->|Config| VPCE_Secrets
    AgentRuntime2 -->|Config| VPCE_Secrets
    
    %% VPC Endpoints to Services
    VPCE_BedrockAgentCore --> BedrockAgentCore
    VPCE_Bedrock --> Bedrock
    VPCE_ECR_API --> ECR
    VPCE_ECR_DKR --> ECR
    VPCE_CW_Logs --> CloudWatch
    VPCE_Secrets --> Secrets
    
    %% IAM Role Association
    IAM -.->|AssumeRole| AgentRuntime1
    IAM -.->|AssumeRole| AgentRuntime2
    
    %% Monitoring
    CloudTrail -.->|Audit Logs| CloudWatch
    BedrockAgentCore -.->|Runtime Metrics| CloudWatch
    
    %% Stack Outputs
    AgentRuntime1 -.->|Outputs
RuntimeArn
RuntimeId
EndpointUrl
Status| StackOutputs[CloudFormation
Stack Outputs]
    AgentRuntime2 -.->|Outputs
RuntimeArn
RuntimeId
EndpointUrl
Status| StackOutputs
    
    %% Styling - AWS Architecture Colors
    classDef compute fill:#FF9900,stroke:#D97F00,stroke-width:3px,color:#000
    classDef ml fill:#01A88D,stroke:#017F6A,stroke-width:3px,color:#fff
    classDef networking fill:#8C4FFF,stroke:#6B3ACC,stroke-width:2px,color:#fff
    classDef security fill:#DD344C,stroke:#B02A3D,stroke-width:2px,color:#fff
    classDef storage fill:#7AA116,stroke:#5F8112,stroke-width:2px,color:#fff
    classDef management fill:#E7157B,stroke:#B81163,stroke-width:2px,color:#fff
    classDef containers fill:#FF9900,stroke:#D97F00,stroke-width:2px,color:#000
    classDef outputs fill:#879596,stroke:#687677,stroke-width:2px,color:#fff
    
    class AgentRuntime1,AgentRuntime2 compute
    class BedrockAgentCore,Bedrock ml
    class VPCE_BedrockAgentCore,VPCE_Bedrock,VPCE_ECR_API,VPCE_ECR_DKR,VPCE_CW_Logs,VPCE_Secrets,RuntimeSG networking
    class IAM,Secrets security
    class ECR containers
    class CloudWatch,CloudTrail management
    class StackOutputs outputs